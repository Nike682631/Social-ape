{"ast":null,"code":"import _defineProperty from\"/home/nikunj/socialape-client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";import _objectSpread from\"/home/nikunj/socialape-client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _slicedToArray from\"/home/nikunj/socialape-client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState,useEffect,useRef}from\"react\";import withStyles from\"@material-ui/core/styles/withStyles\";import AppIcon from\"../images/images.png\";import{Link}from\"react-router-dom\";//MUI STUFF\nimport Grid from\"@material-ui/core/Grid\";import Typography from\"@material-ui/core/Typography\";import TextField from\"@material-ui/core/TextField\";import Button from\"@material-ui/core/Button\";import{CircularProgress}from\"@material-ui/core\";//REDUX\nimport{connect}from\"react-redux\";import{loginUser}from\"../redux/actions/userActions\";var styles={form:{textAlign:\"center\"},image:{margin:\"20px auto 20px auto\"},pageTitle:{margin:\"10px auto 10px auto\"},textField:{margin:\"10px auto 10px auto\"},button:{marginTop:20,position:\"relative\"},customError:{color:\"red\",fontSize:\"0.8rem\",marginTop:10},progress:{position:\"absolute\"}};function Login(props){var _useState=useState({email:\"\",password:\"\",errors:{}}),_useState2=_slicedToArray(_useState,2),object=_useState2[0],setObject=_useState2[1];useEffect(function(){if(props.UI.errors){setObject(_objectSpread(_objectSpread({},object),{},{errors:props.UI.errors}));}},[props.UI.errors]);var isFirstRun=useRef(true);useEffect(function(){if(isFirstRun.current){isFirstRun.current=false;return;}if(props.UI.errors){setObject(_objectSpread(_objectSpread({},object),{},{errors:props.UI.errors}));}},[props.UI.errors]);var handleSubmit=function handleSubmit(event){event.preventDefault();var userData={email:object.email,password:object.password};props.loginUser(userData,props.history);};var handleChange=function handleChange(event){setObject(_objectSpread(_objectSpread({},object),{},_defineProperty({},event.target.name,event.target.value)));};var classes=props.classes,loading=props.UI.loading;var errors=object.errors;return/*#__PURE__*/React.createElement(Grid,{container:true,className:classes.form},/*#__PURE__*/React.createElement(Grid,{item:true,sm:true}),/*#__PURE__*/React.createElement(Grid,{item:true,sm:true},/*#__PURE__*/React.createElement(\"img\",{src:AppIcon,alt:\"monkey\",height:\"50\",width:\"50\",className:classes.image}),/*#__PURE__*/React.createElement(Typography,{variant:\"h3\",className:classes.pageTitle},\"Login\"),/*#__PURE__*/React.createElement(\"form\",{noValidate:true,onSubmit:handleSubmit},/*#__PURE__*/React.createElement(TextField,{id:\"email\",name:\"email\",type:\"email\",label:\"Email\",className:classes.textField,helperText:errors.email,error:errors.email?true:false,value:object.email,onChange:handleChange,fullWidth:true}),/*#__PURE__*/React.createElement(TextField,{id:\"password\",name:\"password\",type:\"password\",label:\"Password\",className:classes.textField,helperText:errors.password,error:errors.password?true:false,value:object.password,onChange:handleChange,fullWidth:true}),errors.general&&/*#__PURE__*/React.createElement(Typography,{variant:\"body2\",className:classes.customError},errors.general),/*#__PURE__*/React.createElement(Button,{type:\"submit\",variant:\"contained\",color:\"primary\",className:classes.button,disabled:loading},\"Login\",loading&&/*#__PURE__*/React.createElement(CircularProgress,{size:30,className:classes.progress})),/*#__PURE__*/React.createElement(\"br\",null),/*#__PURE__*/React.createElement(\"small\",null,\"Don't have an account? Sign up \",/*#__PURE__*/React.createElement(Link,{to:\"/signup\"},\"here\")))),/*#__PURE__*/React.createElement(Grid,{item:true,sm:true}));}var mapStateToProps=function mapStateToProps(state){return{user:state.user,UI:state.UI};};var mapActionsToProps={loginUser:loginUser};export default connect(mapStateToProps,mapActionsToProps)(withStyles(styles)(Login));","map":{"version":3,"sources":["/home/nikunj/socialape-client/src/pages/login.js"],"names":["React","useState","useEffect","useRef","withStyles","AppIcon","Link","Grid","Typography","TextField","Button","CircularProgress","connect","loginUser","styles","form","textAlign","image","margin","pageTitle","textField","button","marginTop","position","customError","color","fontSize","progress","Login","props","email","password","errors","object","setObject","UI","isFirstRun","current","handleSubmit","event","preventDefault","userData","history","handleChange","target","name","value","classes","loading","general","mapStateToProps","state","user","mapActionsToProps"],"mappings":"6bAAA,MAAOA,CAAAA,KAAP,EAAgBC,QAAhB,CAA0BC,SAA1B,CAAqCC,MAArC,KAAmD,OAAnD,CACA,MAAOC,CAAAA,UAAP,KAAuB,qCAAvB,CAEA,MAAOC,CAAAA,OAAP,KAAoB,sBAApB,CACA,OAASC,IAAT,KAAqB,kBAArB,CAEA;AACA,MAAOC,CAAAA,IAAP,KAAiB,wBAAjB,CACA,MAAOC,CAAAA,UAAP,KAAuB,8BAAvB,CACA,MAAOC,CAAAA,SAAP,KAAsB,6BAAtB,CACA,MAAOC,CAAAA,MAAP,KAAmB,0BAAnB,CACA,OAASC,gBAAT,KAAiC,mBAAjC,CAEA;AACA,OAASC,OAAT,KAAwB,aAAxB,CACA,OAASC,SAAT,KAA0B,8BAA1B,CACA,GAAMC,CAAAA,MAAM,CAAG,CACbC,IAAI,CAAE,CACJC,SAAS,CAAE,QADP,CADO,CAIbC,KAAK,CAAE,CACLC,MAAM,CAAE,qBADH,CAJM,CAObC,SAAS,CAAE,CACTD,MAAM,CAAE,qBADC,CAPE,CAUbE,SAAS,CAAE,CACTF,MAAM,CAAE,qBADC,CAVE,CAabG,MAAM,CAAE,CACNC,SAAS,CAAE,EADL,CAENC,QAAQ,CAAE,UAFJ,CAbK,CAiBbC,WAAW,CAAE,CACXC,KAAK,CAAE,KADI,CAEXC,QAAQ,CAAE,QAFC,CAGXJ,SAAS,CAAE,EAHA,CAjBA,CAsBbK,QAAQ,CAAE,CACRJ,QAAQ,CAAE,UADF,CAtBG,CAAf,CA2BA,QAASK,CAAAA,KAAT,CAAeC,KAAf,CAAsB,eACM5B,QAAQ,CAAC,CACjC6B,KAAK,CAAE,EAD0B,CAEjCC,QAAQ,CAAE,EAFuB,CAGjCC,MAAM,CAAE,EAHyB,CAAD,CADd,wCACfC,MADe,eACPC,SADO,eAMpBhC,SAAS,CAAC,UAAM,CACd,GAAI2B,KAAK,CAACM,EAAN,CAASH,MAAb,CAAqB,CACnBE,SAAS,gCACJD,MADI,MAEPD,MAAM,CAAEH,KAAK,CAACM,EAAN,CAASH,MAFV,GAAT,CAID,CACF,CAPQ,CAON,CAACH,KAAK,CAACM,EAAN,CAASH,MAAV,CAPM,CAAT,CAQA,GAAMI,CAAAA,UAAU,CAAGjC,MAAM,CAAC,IAAD,CAAzB,CACAD,SAAS,CAAC,UAAM,CACd,GAAIkC,UAAU,CAACC,OAAf,CAAwB,CACtBD,UAAU,CAACC,OAAX,CAAqB,KAArB,CACA,OACD,CACD,GAAIR,KAAK,CAACM,EAAN,CAASH,MAAb,CAAqB,CACnBE,SAAS,gCACJD,MADI,MAEPD,MAAM,CAAEH,KAAK,CAACM,EAAN,CAASH,MAFV,GAAT,CAID,CACF,CAXQ,CAWN,CAACH,KAAK,CAACM,EAAN,CAASH,MAAV,CAXM,CAAT,CAaA,GAAMM,CAAAA,YAAY,CAAG,QAAfA,CAAAA,YAAe,CAACC,KAAD,CAAW,CAC9BA,KAAK,CAACC,cAAN,GAEA,GAAMC,CAAAA,QAAQ,CAAG,CACfX,KAAK,CAAEG,MAAM,CAACH,KADC,CAEfC,QAAQ,CAAEE,MAAM,CAACF,QAFF,CAAjB,CAIAF,KAAK,CAAChB,SAAN,CAAgB4B,QAAhB,CAA0BZ,KAAK,CAACa,OAAhC,EACD,CARD,CAUA,GAAMC,CAAAA,YAAY,CAAG,QAAfA,CAAAA,YAAe,CAACJ,KAAD,CAAW,CAC9BL,SAAS,gCACJD,MADI,wBAENM,KAAK,CAACK,MAAN,CAAaC,IAFP,CAEcN,KAAK,CAACK,MAAN,CAAaE,KAF3B,GAAT,CAID,CALD,CAtCoB,GA8ClBC,CAAAA,OA9CkB,CAgDhBlB,KAhDgB,CA8ClBkB,OA9CkB,CA+CZC,OA/CY,CAgDhBnB,KAhDgB,CA+ClBM,EA/CkB,CA+CZa,OA/CY,IAiDZhB,CAAAA,MAjDY,CAiDDC,MAjDC,CAiDZD,MAjDY,CAmDpB,mBACE,oBAAC,IAAD,EAAM,SAAS,KAAf,CAAgB,SAAS,CAAEe,OAAO,CAAChC,IAAnC,eACE,oBAAC,IAAD,EAAM,IAAI,KAAV,CAAW,EAAE,KAAb,EADF,cAEE,oBAAC,IAAD,EAAM,IAAI,KAAV,CAAW,EAAE,KAAb,eACE,2BACE,GAAG,CAAEV,OADP,CAEE,GAAG,CAAC,QAFN,CAGE,MAAM,CAAC,IAHT,CAIE,KAAK,CAAC,IAJR,CAKE,SAAS,CAAE0C,OAAO,CAAC9B,KALrB,EADF,cAQE,oBAAC,UAAD,EAAY,OAAO,CAAC,IAApB,CAAyB,SAAS,CAAE8B,OAAO,CAAC5B,SAA5C,UARF,cAWE,4BAAM,UAAU,KAAhB,CAAiB,QAAQ,CAAEmB,YAA3B,eACE,oBAAC,SAAD,EACE,EAAE,CAAC,OADL,CAEE,IAAI,CAAC,OAFP,CAGE,IAAI,CAAC,OAHP,CAIE,KAAK,CAAC,OAJR,CAKE,SAAS,CAAES,OAAO,CAAC3B,SALrB,CAME,UAAU,CAAEY,MAAM,CAACF,KANrB,CAOE,KAAK,CAAEE,MAAM,CAACF,KAAP,CAAe,IAAf,CAAsB,KAP/B,CAQE,KAAK,CAAEG,MAAM,CAACH,KARhB,CASE,QAAQ,CAAEa,YATZ,CAUE,SAAS,KAVX,EADF,cAaE,oBAAC,SAAD,EACE,EAAE,CAAC,UADL,CAEE,IAAI,CAAC,UAFP,CAGE,IAAI,CAAC,UAHP,CAIE,KAAK,CAAC,UAJR,CAKE,SAAS,CAAEI,OAAO,CAAC3B,SALrB,CAME,UAAU,CAAEY,MAAM,CAACD,QANrB,CAOE,KAAK,CAAEC,MAAM,CAACD,QAAP,CAAkB,IAAlB,CAAyB,KAPlC,CAQE,KAAK,CAAEE,MAAM,CAACF,QARhB,CASE,QAAQ,CAAEY,YATZ,CAUE,SAAS,KAVX,EAbF,CAyBGX,MAAM,CAACiB,OAAP,eACC,oBAAC,UAAD,EAAY,OAAO,CAAC,OAApB,CAA4B,SAAS,CAAEF,OAAO,CAACvB,WAA/C,EACGQ,MAAM,CAACiB,OADV,CA1BJ,cA8BE,oBAAC,MAAD,EACE,IAAI,CAAC,QADP,CAEE,OAAO,CAAC,WAFV,CAGE,KAAK,CAAC,SAHR,CAIE,SAAS,CAAEF,OAAO,CAAC1B,MAJrB,CAKE,QAAQ,CAAE2B,OALZ,UAQGA,OAAO,eACN,oBAAC,gBAAD,EAAkB,IAAI,CAAE,EAAxB,CAA4B,SAAS,CAAED,OAAO,CAACpB,QAA/C,EATJ,CA9BF,cA0CE,8BA1CF,cA2CE,gFACiC,oBAAC,IAAD,EAAM,EAAE,CAAC,SAAT,SADjC,CA3CF,CAXF,CAFF,cA6DE,oBAAC,IAAD,EAAM,IAAI,KAAV,CAAW,EAAE,KAAb,EA7DF,CADF,CAiED,CASD,GAAMuB,CAAAA,eAAe,CAAG,QAAlBA,CAAAA,eAAkB,CAACC,KAAD,QAAY,CAClCC,IAAI,CAAED,KAAK,CAACC,IADsB,CAElCjB,EAAE,CAAEgB,KAAK,CAAChB,EAFwB,CAAZ,EAAxB,CAKA,GAAMkB,CAAAA,iBAAiB,CAAG,CACxBxC,SAAS,CAATA,SADwB,CAA1B,CAIA,cAAeD,CAAAA,OAAO,CACpBsC,eADoB,CAEpBG,iBAFoB,CAAP,CAGbjD,UAAU,CAACU,MAAD,CAAV,CAAmBc,KAAnB,CAHa,CAAf","sourcesContent":["import React, { useState, useEffect, useRef } from \"react\";\nimport withStyles from \"@material-ui/core/styles/withStyles\";\nimport PropTypes from \"prop-types\";\nimport AppIcon from \"../images/images.png\";\nimport { Link } from \"react-router-dom\";\n\n//MUI STUFF\nimport Grid from \"@material-ui/core/Grid\";\nimport Typography from \"@material-ui/core/Typography\";\nimport TextField from \"@material-ui/core/TextField\";\nimport Button from \"@material-ui/core/Button\";\nimport { CircularProgress } from \"@material-ui/core\";\n\n//REDUX\nimport { connect } from \"react-redux\";\nimport { loginUser } from \"../redux/actions/userActions\";\nconst styles = {\n  form: {\n    textAlign: \"center\",\n  },\n  image: {\n    margin: \"20px auto 20px auto\",\n  },\n  pageTitle: {\n    margin: \"10px auto 10px auto\",\n  },\n  textField: {\n    margin: \"10px auto 10px auto\",\n  },\n  button: {\n    marginTop: 20,\n    position: \"relative\",\n  },\n  customError: {\n    color: \"red\",\n    fontSize: \"0.8rem\",\n    marginTop: 10,\n  },\n  progress: {\n    position: \"absolute\",\n  },\n};\n\nfunction Login(props) {\n  let [object, setObject] = useState({\n    email: \"\",\n    password: \"\",\n    errors: {},\n  });\n  useEffect(() => {\n    if (props.UI.errors) {\n      setObject({\n        ...object,\n        errors: props.UI.errors,\n      });\n    }\n  }, [props.UI.errors]);\n  const isFirstRun = useRef(true);\n  useEffect(() => {\n    if (isFirstRun.current) {\n      isFirstRun.current = false;\n      return;\n    }\n    if (props.UI.errors) {\n      setObject({\n        ...object,\n        errors: props.UI.errors,\n      });\n    }\n  }, [props.UI.errors]);\n\n  const handleSubmit = (event) => {\n    event.preventDefault();\n\n    const userData = {\n      email: object.email,\n      password: object.password,\n    };\n    props.loginUser(userData, props.history);\n  };\n\n  const handleChange = (event) => {\n    setObject({\n      ...object,\n      [event.target.name]: event.target.value,\n    });\n  };\n\n  const {\n    classes,\n    UI: { loading },\n  } = props;\n  const { errors } = object;\n\n  return (\n    <Grid container className={classes.form}>\n      <Grid item sm />\n      <Grid item sm>\n        <img\n          src={AppIcon}\n          alt=\"monkey\"\n          height=\"50\"\n          width=\"50\"\n          className={classes.image}\n        />\n        <Typography variant=\"h3\" className={classes.pageTitle}>\n          Login\n        </Typography>\n        <form noValidate onSubmit={handleSubmit}>\n          <TextField\n            id=\"email\"\n            name=\"email\"\n            type=\"email\"\n            label=\"Email\"\n            className={classes.textField}\n            helperText={errors.email}\n            error={errors.email ? true : false}\n            value={object.email}\n            onChange={handleChange}\n            fullWidth\n          />\n          <TextField\n            id=\"password\"\n            name=\"password\"\n            type=\"password\"\n            label=\"Password\"\n            className={classes.textField}\n            helperText={errors.password}\n            error={errors.password ? true : false}\n            value={object.password}\n            onChange={handleChange}\n            fullWidth\n          />\n          {errors.general && (\n            <Typography variant=\"body2\" className={classes.customError}>\n              {errors.general}\n            </Typography>\n          )}\n          <Button\n            type=\"submit\"\n            variant=\"contained\"\n            color=\"primary\"\n            className={classes.button}\n            disabled={loading}\n          >\n            Login\n            {loading && (\n              <CircularProgress size={30} className={classes.progress} />\n            )}\n          </Button>\n          <br />\n          <small>\n            Don't have an account? Sign up <Link to=\"/signup\">here</Link>\n          </small>\n        </form>\n      </Grid>\n      <Grid item sm />\n    </Grid>\n  );\n}\n\nLogin.propTypes = {\n  classes: PropTypes.object.isRequired,\n  loginUser: PropTypes.func.isRequired,\n  user: PropTypes.object.isRequired,\n  UI: PropTypes.object.isRequired,\n};\n\nconst mapStateToProps = (state) => ({\n  user: state.user,\n  UI: state.UI,\n});\n\nconst mapActionsToProps = {\n  loginUser,\n};\n\nexport default connect(\n  mapStateToProps,\n  mapActionsToProps\n)(withStyles(styles)(Login));\n"]},"metadata":{},"sourceType":"module"}