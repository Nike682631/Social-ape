{"ast":null,"code":"import _defineProperty from\"/home/nikunj/socialape-client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";import _objectSpread from\"/home/nikunj/socialape-client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _slicedToArray from\"/home/nikunj/socialape-client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState,useEffect,useRef}from\"react\";import withStyles from\"@material-ui/core/styles/withStyles\";import AppIcon from\"../images/images.png\";import{Link}from\"react-router-dom\";//MUI STUFF\nimport Grid from\"@material-ui/core/Grid\";import Typography from\"@material-ui/core/Typography\";import TextField from\"@material-ui/core/TextField\";import Button from\"@material-ui/core/Button\";import{CircularProgress}from\"@material-ui/core\";//REDUX\nimport{connect}from\"react-redux\";import{signupUser}from\"../redux/actions/userActions\";var styles={form:{textAlign:\"center\"},image:{margin:\"20px auto 20px auto\"},pageTitle:{margin:\"10px auto 10px auto\"},textField:{margin:\"10px auto 10px auto\"},button:{marginTop:20,position:\"relative\"},customError:{color:\"red\",fontSize:\"0.8rem\",marginTop:10},progress:{position:\"absolute\"}};function Signup(props){var _useState=useState({email:\"\",password:\"\",confirmPassword:\"\",handle:\"\",errors:{}}),_useState2=_slicedToArray(_useState,2),object=_useState2[0],setObject=_useState2[1];useEffect(function(){if(props.UI.errors){setObject(_objectSpread(_objectSpread({},object),{},{errors:props.UI.errors}));}},[props.UI.errors]);var isFirstRun=useRef(true);useEffect(function(){if(isFirstRun.current){isFirstRun.current=false;return;}// console.log(props.UI.errors);\nif(props.UI.errors){setObject(_objectSpread(_objectSpread({},object),{},{errors:props.UI.errors}));}},[props.UI.errors]);var handleSubmit=function handleSubmit(event){event.preventDefault();setObject(_objectSpread(_objectSpread({},object),{},{loading:true}));var newUserData={email:object.email,password:object.password,confirmPassword:object.confirmPassword,handle:object.handle};props.signupUser(newUserData,props.history);};var handleChange=function handleChange(event){setObject(_objectSpread(_objectSpread({},object),{},_defineProperty({},event.target.name,event.target.value)));};var classes=props.classes,loading=props.UI.loading;var errors=object.errors;return/*#__PURE__*/React.createElement(Grid,{container:true,className:classes.form},/*#__PURE__*/React.createElement(Grid,{item:true,sm:true}),/*#__PURE__*/React.createElement(Grid,{item:true,sm:true},/*#__PURE__*/React.createElement(\"img\",{src:AppIcon,alt:\"monkey\",height:\"50\",width:\"50\",className:classes.image}),/*#__PURE__*/React.createElement(Typography,{variant:\"h3\",className:classes.pageTitle},\"Signup\"),/*#__PURE__*/React.createElement(\"form\",{noValidate:true,onSubmit:handleSubmit},/*#__PURE__*/React.createElement(TextField,{id:\"email\",name:\"email\",type:\"email\",label:\"Email\",className:classes.textField,helperText:errors.email,error:errors.email?true:false,value:object.email,onChange:handleChange,fullWidth:true}),/*#__PURE__*/React.createElement(TextField,{id:\"password\",name:\"password\",type:\"password\",label:\"Password\",className:classes.textField,helperText:errors.password,error:errors.password?true:false,value:object.password,onChange:handleChange,fullWidth:true}),/*#__PURE__*/React.createElement(TextField,{id:\"confirmPassword\",name:\"confirmPassword\",type:\"password\",label:\"Confirm Password\",className:classes.textField,helperText:errors.confirmPassword,error:errors.confirmPassword?true:false,value:object.confirmPassword,onChange:handleChange,fullWidth:true}),/*#__PURE__*/React.createElement(TextField,{id:\"handle\",name:\"handle\",type:\"text\",label:\"Handle\",className:classes.textField,helperText:errors.handle,error:errors.handle?true:false,value:object.handle,onChange:handleChange,fullWidth:true}),errors.general&&/*#__PURE__*/React.createElement(Typography,{variant:\"body2\",className:classes.customError},errors.general),/*#__PURE__*/React.createElement(Button,{type:\"submit\",variant:\"contained\",color:\"primary\",className:classes.button,disabled:loading},\"Signup\",loading&&/*#__PURE__*/React.createElement(CircularProgress,{size:30,className:classes.progress})),/*#__PURE__*/React.createElement(\"br\",null),/*#__PURE__*/React.createElement(\"small\",null,\"Already have an account? Login \",/*#__PURE__*/React.createElement(Link,{to:\"/login\"},\"here\")))),/*#__PURE__*/React.createElement(Grid,{item:true,sm:true}));}var mapStateToProps=function mapStateToProps(state){return{user:state.user,UI:state.UI};};export default connect(mapStateToProps,{signupUser:signupUser})(withStyles(styles)(Signup));","map":{"version":3,"sources":["/home/nikunj/socialape-client/src/pages/signup.js"],"names":["React","useState","useEffect","useRef","withStyles","AppIcon","Link","Grid","Typography","TextField","Button","CircularProgress","connect","signupUser","styles","form","textAlign","image","margin","pageTitle","textField","button","marginTop","position","customError","color","fontSize","progress","Signup","props","email","password","confirmPassword","handle","errors","object","setObject","UI","isFirstRun","current","handleSubmit","event","preventDefault","loading","newUserData","history","handleChange","target","name","value","classes","general","mapStateToProps","state","user"],"mappings":"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","sourcesContent":["import React, { useState, useEffect, useRef } from \"react\";\nimport withStyles from \"@material-ui/core/styles/withStyles\";\nimport PropTypes from \"prop-types\";\nimport AppIcon from \"../images/images.png\";\n\nimport { Link } from \"react-router-dom\";\n\n//MUI STUFF\nimport Grid from \"@material-ui/core/Grid\";\nimport Typography from \"@material-ui/core/Typography\";\nimport TextField from \"@material-ui/core/TextField\";\nimport Button from \"@material-ui/core/Button\";\nimport { CircularProgress } from \"@material-ui/core\";\n\n//REDUX\nimport { connect } from \"react-redux\";\nimport { signupUser } from \"../redux/actions/userActions\";\n\nconst styles = {\n  form: {\n    textAlign: \"center\",\n  },\n  image: {\n    margin: \"20px auto 20px auto\",\n  },\n  pageTitle: {\n    margin: \"10px auto 10px auto\",\n  },\n  textField: {\n    margin: \"10px auto 10px auto\",\n  },\n  button: {\n    marginTop: 20,\n    position: \"relative\",\n  },\n  customError: {\n    color: \"red\",\n    fontSize: \"0.8rem\",\n    marginTop: 10,\n  },\n  progress: {\n    position: \"absolute\",\n  },\n};\n\nfunction Signup(props) {\n  let [object, setObject] = useState({\n    email: \"\",\n    password: \"\",\n    confirmPassword: \"\",\n    handle: \"\",\n    errors: {},\n  });\n\n  useEffect(() => {\n    if (props.UI.errors) {\n      setObject({\n        ...object,\n        errors: props.UI.errors,\n      });\n    }\n  }, [props.UI.errors]);\n  const isFirstRun = useRef(true);\n  useEffect(() => {\n    if (isFirstRun.current) {\n      isFirstRun.current = false;\n      return;\n    }\n    // console.log(props.UI.errors);\n    if (props.UI.errors) {\n      setObject({\n        ...object,\n        errors: props.UI.errors,\n      });\n    }\n  }, [props.UI.errors]);\n\n  const handleSubmit = (event) => {\n    event.preventDefault();\n    setObject({\n      ...object,\n      loading: true,\n    });\n    const newUserData = {\n      email: object.email,\n      password: object.password,\n      confirmPassword: object.confirmPassword,\n      handle: object.handle,\n    };\n    props.signupUser(newUserData, props.history);\n  };\n\n  const handleChange = (event) => {\n    setObject({\n      ...object,\n      [event.target.name]: event.target.value,\n    });\n  };\n\n  const {\n    classes,\n    UI: { loading },\n  } = props;\n  const { errors } = object;\n\n  return (\n    <Grid container className={classes.form}>\n      <Grid item sm />\n      <Grid item sm>\n        <img\n          src={AppIcon}\n          alt=\"monkey\"\n          height=\"50\"\n          width=\"50\"\n          className={classes.image}\n        />\n        <Typography variant=\"h3\" className={classes.pageTitle}>\n          Signup\n        </Typography>\n        <form noValidate onSubmit={handleSubmit}>\n          <TextField\n            id=\"email\"\n            name=\"email\"\n            type=\"email\"\n            label=\"Email\"\n            className={classes.textField}\n            helperText={errors.email}\n            error={errors.email ? true : false}\n            value={object.email}\n            onChange={handleChange}\n            fullWidth\n          />\n          <TextField\n            id=\"password\"\n            name=\"password\"\n            type=\"password\"\n            label=\"Password\"\n            className={classes.textField}\n            helperText={errors.password}\n            error={errors.password ? true : false}\n            value={object.password}\n            onChange={handleChange}\n            fullWidth\n          />\n          <TextField\n            id=\"confirmPassword\"\n            name=\"confirmPassword\"\n            type=\"password\"\n            label=\"Confirm Password\"\n            className={classes.textField}\n            helperText={errors.confirmPassword}\n            error={errors.confirmPassword ? true : false}\n            value={object.confirmPassword}\n            onChange={handleChange}\n            fullWidth\n          />\n          <TextField\n            id=\"handle\"\n            name=\"handle\"\n            type=\"text\"\n            label=\"Handle\"\n            className={classes.textField}\n            helperText={errors.handle}\n            error={errors.handle ? true : false}\n            value={object.handle}\n            onChange={handleChange}\n            fullWidth\n          />\n          {errors.general && (\n            <Typography variant=\"body2\" className={classes.customError}>\n              {errors.general}\n            </Typography>\n          )}\n          <Button\n            type=\"submit\"\n            variant=\"contained\"\n            color=\"primary\"\n            className={classes.button}\n            disabled={loading}\n          >\n            Signup\n            {loading && (\n              <CircularProgress size={30} className={classes.progress} />\n            )}\n          </Button>\n          <br />\n          <small>\n            Already have an account? Login <Link to=\"/login\">here</Link>\n          </small>\n        </form>\n      </Grid>\n      <Grid item sm />\n    </Grid>\n  );\n}\n\nSignup.propTypes = {\n  classes: PropTypes.object.isRequired,\n  user: PropTypes.object.isRequired,\n  UI: PropTypes.object.isRequired,\n  signupUser: PropTypes.func.isRequired,\n};\n\nconst mapStateToProps = (state) => ({\n  user: state.user,\n  UI: state.UI,\n});\n\nexport default connect(mapStateToProps, { signupUser })(\n  withStyles(styles)(Signup)\n);\n"]},"metadata":{},"sourceType":"module"}