{"ast":null,"code":"var _jsxFileName = \"/home/nikunj/socialape-client/src/components/PostScream.js\";\nimport React, { Fragment, useEffect, useState, useRef } from \"react\";\nimport PropTypes from \"prop-types\";\nimport withStyles from \"@material-ui/core/styles/withStyles\";\nimport MyButton from \"../util/MyButton\"; //Mui stuff\n\nimport Button from \"@material-ui/core/Button\";\nimport TextField from \"@material-ui/core/TextField\";\nimport Dialog from \"@material-ui/core/Dialog\";\nimport DialogContent from \"@material-ui/core/DialogContent\";\nimport DialogTitle from \"@material-ui/core/DialogTitle\";\nimport CircularProgress from \"@material-ui/core/CircularProgress\"; //Icons\n\nimport AddIcon from \"@material-ui/icons/Add\";\nimport CloseIcon from \"@material-ui/icons/Close\"; //Redux\n\nimport { connect } from \"react-redux\";\nimport { postScream } from \"../redux/actions/dataActions\";\nimport theme from \"../util/theme\";\nconst styles = { ...theme,\n  submitButton: {\n    position: \"relative\"\n  },\n  progressSpinner: {\n    position: \"absolute\"\n  },\n  closeButton: {\n    position: \"absolute\",\n    left: \"91%\",\n    top: \"4%\"\n  }\n};\n\nfunction PostScream(props) {\n  const [state, setState] = useState({\n    open: false,\n    body: \"\",\n    errors: {}\n  });\n  const isFirstRun = useRef(true);\n  useEffect(() => {\n    if (isFirstRun.current) {\n      isFirstRun.current = false;\n      return;\n    }\n\n    if (props.UI.errors) {\n      setState({ ...state,\n        errors: props.UI.errors\n      });\n    }\n  }, [props.UI.errors]);\n\n  const handleOpen = () => {\n    setState({ ...state,\n      open: true\n    });\n  };\n\n  const handleClose = () => {\n    setState({ ...state,\n      open: false,\n      errors: {}\n    });\n  };\n\n  const handleChange = event => {\n    setState({ ...state,\n      [event.target.name]: event.target.value\n    });\n  };\n\n  const handleSubmit = event => {\n    event.preventDefault();\n    props.postScream({\n      body: state.body\n    });\n\n    if (!props.UI.errors && !props.UI.loading) {\n      setState({ ...state,\n        body: \"\"\n      });\n      handleClose();\n    }\n  };\n\n  const {\n    errors\n  } = state;\n  const {\n    classes,\n    UI: {\n      loading\n    }\n  } = props;\n  return /*#__PURE__*/React.createElement(Fragment, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 87,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(MyButton, {\n    onClick: handleOpen,\n    tip: \"Post a Scream!\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 88,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(AddIcon, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 89,\n      columnNumber: 9\n    }\n  })), /*#__PURE__*/React.createElement(Dialog, {\n    open: state.open,\n    onClose: handleClose,\n    fullWidth: true,\n    maxWidth: \"sm\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 91,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(MyButton, {\n    tip: \"Close\",\n    onClick: handleClose,\n    tipClassName: classes.closeButton,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 92,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(CloseIcon, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 97,\n      columnNumber: 11\n    }\n  })), /*#__PURE__*/React.createElement(DialogTitle, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 99,\n      columnNumber: 9\n    }\n  }, \"Post a new Scream\"), /*#__PURE__*/React.createElement(DialogContent, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 100,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"form\", {\n    onSubmit: handleSubmit,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 101,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(TextField, {\n    name: \"body\",\n    type: \"text\",\n    label: \"SCREAM!!!\",\n    multiline: true,\n    rows: \"3\",\n    placeholder: \"Scream at your fellow mates\",\n    error: errors.body ? true : false,\n    helperText: errors.body,\n    className: classes.TextField,\n    onChange: handleChange,\n    fullWidth: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 102,\n      columnNumber: 13\n    }\n  }), /*#__PURE__*/React.createElement(Button, {\n    type: \"submit\",\n    variant: \"contained\",\n    color: \"primary\",\n    className: classes.submitButton,\n    disabled: loading,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 115,\n      columnNumber: 13\n    }\n  }, \"Submit\", loading && /*#__PURE__*/React.createElement(CircularProgress, {\n    size: 30,\n    className: classes.progressSpinner,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 124,\n      columnNumber: 17\n    }\n  }))))));\n}\n\nPostScream.propTypes = {\n  postScream: PropTypes.func.isRequired,\n  UI: PropTypes.object.isRequired\n};\n\nconst mapStateToProps = state => ({\n  UI: state.UI\n});\n\nexport default connect(mapStateToProps, {\n  postScream\n})(withStyles(styles)(PostScream));","map":{"version":3,"sources":["/home/nikunj/socialape-client/src/components/PostScream.js"],"names":["React","Fragment","useEffect","useState","useRef","PropTypes","withStyles","MyButton","Button","TextField","Dialog","DialogContent","DialogTitle","CircularProgress","AddIcon","CloseIcon","connect","postScream","theme","styles","submitButton","position","progressSpinner","closeButton","left","top","PostScream","props","state","setState","open","body","errors","isFirstRun","current","UI","handleOpen","handleClose","handleChange","event","target","name","value","handleSubmit","preventDefault","loading","classes","propTypes","func","isRequired","object","mapStateToProps"],"mappings":"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","sourcesContent":["import React, { Fragment, useEffect, useState, useRef } from \"react\";\nimport PropTypes from \"prop-types\";\nimport withStyles from \"@material-ui/core/styles/withStyles\";\nimport MyButton from \"../util/MyButton\";\n\n//Mui stuff\nimport Button from \"@material-ui/core/Button\";\nimport TextField from \"@material-ui/core/TextField\";\nimport Dialog from \"@material-ui/core/Dialog\";\nimport DialogContent from \"@material-ui/core/DialogContent\";\nimport DialogTitle from \"@material-ui/core/DialogTitle\";\nimport CircularProgress from \"@material-ui/core/CircularProgress\";\n//Icons\nimport AddIcon from \"@material-ui/icons/Add\";\nimport CloseIcon from \"@material-ui/icons/Close\";\n//Redux\nimport { connect } from \"react-redux\";\nimport { postScream } from \"../redux/actions/dataActions\";\nimport theme from \"../util/theme\";\n\nconst styles = {\n  ...theme,\n  submitButton: {\n    position: \"relative\",\n  },\n  progressSpinner: {\n    position: \"absolute\",\n  },\n  closeButton: {\n    position: \"absolute\",\n    left: \"91%\",\n    top: \"4%\",\n  },\n};\n\nfunction PostScream(props) {\n  const [state, setState] = useState({\n    open: false,\n    body: \"\",\n    errors: {},\n  });\n\n  const isFirstRun = useRef(true);\n  useEffect(() => {\n    if (isFirstRun.current) {\n      isFirstRun.current = false;\n      return;\n    }\n    if (props.UI.errors) {\n      setState({\n        ...state,\n        errors: props.UI.errors,\n      });\n    }\n  }, [props.UI.errors]);\n\n  const handleOpen = () => {\n    setState({ ...state, open: true });\n  };\n\n  const handleClose = () => {\n    setState({ ...state, open: false, errors: {} });\n  };\n\n  const handleChange = (event) => {\n    setState({ ...state, [event.target.name]: event.target.value });\n  };\n\n  const handleSubmit = (event) => {\n    event.preventDefault();\n    props.postScream({ body: state.body });\n    if (!props.UI.errors && !props.UI.loading) {\n      setState({\n        ...state,\n        body: \"\",\n      });\n      handleClose();\n    }\n  };\n  const { errors } = state;\n  const {\n    classes,\n    UI: { loading },\n  } = props;\n\n  return (\n    <Fragment>\n      <MyButton onClick={handleOpen} tip=\"Post a Scream!\">\n        <AddIcon />\n      </MyButton>\n      <Dialog open={state.open} onClose={handleClose} fullWidth maxWidth=\"sm\">\n        <MyButton\n          tip=\"Close\"\n          onClick={handleClose}\n          tipClassName={classes.closeButton}\n        >\n          <CloseIcon />\n        </MyButton>\n        <DialogTitle>Post a new Scream</DialogTitle>\n        <DialogContent>\n          <form onSubmit={handleSubmit}>\n            <TextField\n              name=\"body\"\n              type=\"text\"\n              label=\"SCREAM!!!\"\n              multiline\n              rows=\"3\"\n              placeholder=\"Scream at your fellow mates\"\n              error={errors.body ? true : false}\n              helperText={errors.body}\n              className={classes.TextField}\n              onChange={handleChange}\n              fullWidth\n            />\n            <Button\n              type=\"submit\"\n              variant=\"contained\"\n              color=\"primary\"\n              className={classes.submitButton}\n              disabled={loading}\n            >\n              Submit\n              {loading && (\n                <CircularProgress\n                  size={30}\n                  className={classes.progressSpinner}\n                />\n              )}\n            </Button>\n          </form>\n        </DialogContent>\n      </Dialog>\n    </Fragment>\n  );\n}\n\nPostScream.propTypes = {\n  postScream: PropTypes.func.isRequired,\n  UI: PropTypes.object.isRequired,\n};\n\nconst mapStateToProps = (state) => ({\n  UI: state.UI,\n});\n\nexport default connect(mapStateToProps, { postScream })(\n  withStyles(styles)(PostScream)\n);\n"]},"metadata":{},"sourceType":"module"}