{"ast":null,"code":"import _defineProperty from\"/home/nikunj/socialape-client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";import _objectSpread from\"/home/nikunj/socialape-client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _slicedToArray from\"/home/nikunj/socialape-client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{Fragment,useEffect,useState,useRef}from\"react\";import PropTypes from\"prop-types\";import withStyles from\"@material-ui/core/styles/withStyles\";//MUI stuff\nimport Button from\"@material-ui/core/Button\";import Grid from\"@material-ui/core/Grid\";import TextField from\"@material-ui/core/TextField\";//Redux stuff\nimport{connect}from\"react-redux\";import{submitComment}from\"../../redux/actions/dataActions\";import{SET_ERRORS}from\"../../redux/types\";var styles=function styles(theme){return{palette:{primary:{light:\"#33c9dc\",main:\"#00bcd4\",dark:\"#008394\",contrastText:\"#fff\"},secondary:{light:\"#ff6333\",main:\"#ff3d00\",dark:\"#b22a00\",contrastText:\"#fff\"}},form:{textAlign:\"center\"},image:{margin:\"20px auto 20px auto\"},pageTitle:{margin:\"10px auto 10px auto\"},textField:{margin:\"10px auto 10px auto\"},button:{marginTop:20,position:\"relative\"},customError:{color:\"red\",fontSize:\"0.8rem\",marginTop:10},progress:{position:\"absolute\"},invisibeSeparator:{border:\"none\",margin:4},visibleSeparator:{width:\"100%\",borderBottom:\"1px solid rgba(0,0,0,0.1)\",marginBottom:20}};};function CommentForm(props){var _useState=useState({body:\"\",errors:{}}),_useState2=_slicedToArray(_useState,2),state=_useState2[0],setState=_useState2[1];var isFirstRun=useRef(true);useEffect(function(){if(isFirstRun.current){isFirstRun.current=false;return;}if(props.UI.errors){setState(_objectSpread(_objectSpread({},state),{},{errors:props.UI.errors}));}},[props.UI.errors]);var handleChange=function handleChange(event){setState(_objectSpread(_objectSpread({},state),{},_defineProperty({},event.target.name,event.target.value)));};var handleSubmit=function handleSubmit(event){event.preventDefault();props.submitComment(props.screamId,{body:state.body});if(!props.UI.errors&&!props.UI.loading){setState(_objectSpread(_objectSpread({},state),{},{body:\"\"}));}};var classes=props.classes,authenticated=props.authenticated;var errors=state.errors;var commentFormMarkup=authenticated?/*#__PURE__*/React.createElement(Grid,{item:true,sm:9,style:{textAlign:\"center\",position:\"relative\",left:\"15%\"}},/*#__PURE__*/React.createElement(\"form\",{onSubmit:handleSubmit},/*#__PURE__*/React.createElement(TextField,{name:\"body\",type:\"text\",label:\"Comment on scream\",error:errors.comment?true:false,helperText:errors.comment,value:state.body,onChange:handleChange,fullWidth:true,className:classes.textField}),/*#__PURE__*/React.createElement(Button,{type:\"submit\",variant:\"contained\",color:\"primary\",className:classes.button},\"Submit\")),/*#__PURE__*/React.createElement(\"hr\",{className:classes.visibleSeparator})):null;return commentFormMarkup;}CommentForm.propTypes={UI:PropTypes.object.isRequired,authenticated:PropTypes.bool.isRequired,submitComment:PropTypes.func.isRequired,classes:PropTypes.object.isRequired,screamId:PropTypes.string.isRequired};var mapStateToProps=function mapStateToProps(state){return{UI:state.UI,authenticated:state.user.authenticated};};export default connect(mapStateToProps,{submitComment:submitComment})(withStyles(styles)(CommentForm));","map":{"version":3,"sources":["/home/nikunj/socialape-client/src/components/scream/CommentForm.js"],"names":["React","Fragment","useEffect","useState","useRef","PropTypes","withStyles","Button","Grid","TextField","connect","submitComment","SET_ERRORS","styles","theme","palette","primary","light","main","dark","contrastText","secondary","form","textAlign","image","margin","pageTitle","textField","button","marginTop","position","customError","color","fontSize","progress","invisibeSeparator","border","visibleSeparator","width","borderBottom","marginBottom","CommentForm","props","body","errors","state","setState","isFirstRun","current","UI","handleChange","event","target","name","value","handleSubmit","preventDefault","screamId","loading","classes","authenticated","commentFormMarkup","left","comment","propTypes","object","isRequired","bool","func","string","mapStateToProps","user"],"mappings":"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","sourcesContent":["import React, { Fragment, useEffect, useState, useRef } from \"react\";\nimport PropTypes from \"prop-types\";\nimport withStyles from \"@material-ui/core/styles/withStyles\";\n\n//MUI stuff\nimport Button from \"@material-ui/core/Button\";\nimport Grid from \"@material-ui/core/Grid\";\nimport TextField from \"@material-ui/core/TextField\";\n\n//Redux stuff\nimport { connect } from \"react-redux\";\nimport { submitComment } from \"../../redux/actions/dataActions\";\nimport { SET_ERRORS } from \"../../redux/types\";\n\nconst styles = (theme) => ({\n  palette: {\n    primary: {\n      light: \"#33c9dc\",\n      main: \"#00bcd4\",\n      dark: \"#008394\",\n      contrastText: \"#fff\",\n    },\n    secondary: {\n      light: \"#ff6333\",\n      main: \"#ff3d00\",\n      dark: \"#b22a00\",\n      contrastText: \"#fff\",\n    },\n  },\n  form: {\n    textAlign: \"center\",\n  },\n  image: {\n    margin: \"20px auto 20px auto\",\n  },\n  pageTitle: {\n    margin: \"10px auto 10px auto\",\n  },\n  textField: {\n    margin: \"10px auto 10px auto\",\n  },\n  button: {\n    marginTop: 20,\n    position: \"relative\",\n  },\n  customError: {\n    color: \"red\",\n    fontSize: \"0.8rem\",\n    marginTop: 10,\n  },\n  progress: {\n    position: \"absolute\",\n  },\n\n  invisibeSeparator: {\n    border: \"none\",\n    margin: 4,\n  },\n  visibleSeparator: {\n    width: \"100%\",\n    borderBottom: \"1px solid rgba(0,0,0,0.1)\",\n    marginBottom: 20,\n  },\n});\n\nfunction CommentForm(props) {\n  const [state, setState] = useState({\n    body: \"\",\n    errors: {},\n  });\n\n  const isFirstRun = useRef(true);\n  useEffect(() => {\n    if (isFirstRun.current) {\n      isFirstRun.current = false;\n      return;\n    }\n    if (props.UI.errors) {\n      setState({\n        ...state,\n        errors: props.UI.errors,\n      });\n    }\n  }, [props.UI.errors]);\n\n  const handleChange = (event) => {\n    setState({ ...state, [event.target.name]: event.target.value });\n  };\n\n  const handleSubmit = (event) => {\n    event.preventDefault();\n    props.submitComment(props.screamId, { body: state.body });\n    if (!props.UI.errors && !props.UI.loading) {\n      setState({\n        ...state,\n        body: \"\",\n      });\n    }\n  };\n\n  const { classes, authenticated } = props;\n  const errors = state.errors;\n  const commentFormMarkup = authenticated ? (\n    <Grid\n      item\n      sm={9}\n      style={{ textAlign: \"center\", position: \"relative\", left: \"15%\" }}\n    >\n      <form onSubmit={handleSubmit}>\n        <TextField\n          name=\"body\"\n          type=\"text\"\n          label=\"Comment on scream\"\n          error={errors.comment ? true : false}\n          helperText={errors.comment}\n          value={state.body}\n          onChange={handleChange}\n          fullWidth\n          className={classes.textField}\n        />\n        <Button\n          type=\"submit\"\n          variant=\"contained\"\n          color=\"primary\"\n          className={classes.button}\n        >\n          Submit\n        </Button>\n      </form>\n      <hr className={classes.visibleSeparator} />\n    </Grid>\n  ) : null;\n\n  return commentFormMarkup;\n}\n\nCommentForm.propTypes = {\n  UI: PropTypes.object.isRequired,\n  authenticated: PropTypes.bool.isRequired,\n  submitComment: PropTypes.func.isRequired,\n  classes: PropTypes.object.isRequired,\n  screamId: PropTypes.string.isRequired,\n};\n\nconst mapStateToProps = (state) => ({\n  UI: state.UI,\n  authenticated: state.user.authenticated,\n});\n\nexport default connect(mapStateToProps, { submitComment })(\n  withStyles(styles)(CommentForm)\n);\n"]},"metadata":{},"sourceType":"module"}