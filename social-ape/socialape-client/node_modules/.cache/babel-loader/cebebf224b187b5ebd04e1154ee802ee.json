{"ast":null,"code":"import _objectSpread from\"/home/nikunj/socialape-client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _slicedToArray from\"/home/nikunj/socialape-client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{Fragment,useEffect,useState,useRef}from\"react\";import withStyles from\"@material-ui/core/styles/withStyles\";import MyButton from\"../../util/MyButton\";import dayjs from\"dayjs\";import{Link}from\"react-router-dom\";import LikeButton from\"./LikeButton\";import Comments from\"./Comments\";import CommentForm from\"./CommentForm\";//MUI stuff\nimport Dialog from\"@material-ui/core/Dialog\";import DialogContent from\"@material-ui/core/DialogContent\";import CircularProgress from\"@material-ui/core/CircularProgress\";import Grid from\"@material-ui/core/Grid\";import Typography from\"@material-ui/core/Typography\";//Icons\nimport CloseIcon from\"@material-ui/icons/Close\";import UnfoldMore from\"@material-ui/icons/UnfoldMore\";import ChatIcon from\"@material-ui/icons/Chat\";//Redux stuff\nimport{connect}from\"react-redux\";import{getScream,clearErrors}from\"../../redux/actions/dataActions\";var styles=function styles(theme){return{//   ...theme,\ninvisibeSeparator:{border:\"none\",margin:4},profileImage:{maxWidth:200,height:200,borderRadius:\"50%\",objectFit:\"cover\"},dialogContent:{padding:20},closeButton:{position:\"absolute\",left:\"90%\"},expandButton:{position:\"absolute\",left:\"90%\"},spinnerDiv:{textAlign:\"center\",marginTop:50,marginBottom:50},visibleSeparator:{width:\"100%\",borderBottom:\"1px solid rgba(0,0,0,0.1)\",marginBottom:20}};};function ScreamDialog(props){var _useState=useState({open:false,newPath:\"\",oldPath:\"\"}),_useState2=_slicedToArray(_useState,2),state=_useState2[0],setState=_useState2[1];var handleOpen=function handleOpen(){var oldPath=window.location.pathname;var userHandle=props.userHandle,screamId=props.screamId;var newPath=\"/users/\".concat(userHandle,\"/scream/\").concat(screamId);if(oldPath===newPath)oldPath=\"/users/\".concat(userHandle);window.history.pushState(null,null,newPath);setState(_objectSpread(_objectSpread({},state),{},{open:true,oldPath:oldPath,newPath:newPath}));props.getScream(props.screamId);};var handleClose=function handleClose(){window.history.pushState(null,null,state.oldPath);setState(_objectSpread(_objectSpread({},state),{},{open:false}));props.clearErrors();};var classes=props.classes,_props$scream=props.scream,screamId=_props$scream.screamId,body=_props$scream.body,createdAt=_props$scream.createdAt,likeCount=_props$scream.likeCount,commentCount=_props$scream.commentCount,userImage=_props$scream.userImage,userHandle=_props$scream.userHandle,comments=_props$scream.comments,loading=props.UI.loading;useEffect(function(){if(props.openDialog)handleOpen();},[]);useEffect(function(){// props.getScream(props.screamId);\nreturn;},[JSON.stringify(comments)]);var dialogMarkup=loading?/*#__PURE__*/React.createElement(\"div\",{className:classes.spinnerDiv},/*#__PURE__*/React.createElement(CircularProgress,{size:200,thickness:2})):/*#__PURE__*/React.createElement(Grid,{container:true,spacing:10},/*#__PURE__*/React.createElement(Grid,{item:true,sm:5},/*#__PURE__*/React.createElement(\"img\",{src:userImage,alt:\"Profile\",className:classes.profileImage})),/*#__PURE__*/React.createElement(Grid,{item:true,sm:7},/*#__PURE__*/React.createElement(Typography,{component:Link,color:\"primary\",variant:\"h5\",to:\"/users/\".concat(userHandle)},\"@\",userHandle),/*#__PURE__*/React.createElement(\"hr\",{className:classes.invisibeSeparator}),/*#__PURE__*/React.createElement(Typography,{variant:\"body2\",color:\"textSecondary\"},dayjs(createdAt).format(\"h:mm a, MMMM DD YYYY\")),/*#__PURE__*/React.createElement(\"hr\",{className:classes.invisibeSeparator}),/*#__PURE__*/React.createElement(Typography,{variant:\"body1\"},body),/*#__PURE__*/React.createElement(LikeButton,{screamId:screamId}),/*#__PURE__*/React.createElement(\"span\",null,likeCount,\" likes\"),/*#__PURE__*/React.createElement(MyButton,{tip:\"comment\"},/*#__PURE__*/React.createElement(ChatIcon,{color:\"primary\"})),/*#__PURE__*/React.createElement(\"span\",null,commentCount,\" comments\")),/*#__PURE__*/React.createElement(\"hr\",{className:classes.visibleSeparator}),/*#__PURE__*/React.createElement(CommentForm,{screamId:screamId}),/*#__PURE__*/React.createElement(Comments,{comments:comments}));return/*#__PURE__*/React.createElement(Fragment,null,/*#__PURE__*/React.createElement(MyButton,{onClick:handleOpen,tip:\"Expand Scream\",tipClassName:classes.expandButton},/*#__PURE__*/React.createElement(UnfoldMore,{color:\"primary\"})),/*#__PURE__*/React.createElement(Dialog,{open:state.open,onClose:handleClose,fullWidth:true,maxWidth:\"sm\"},/*#__PURE__*/React.createElement(MyButton,{tip:\"Close\",onClick:handleClose,tipClassName:classes.closeButton},/*#__PURE__*/React.createElement(CloseIcon,null)),/*#__PURE__*/React.createElement(DialogContent,{className:classes.dialogContent},dialogMarkup)));}var mapStateToProps=function mapStateToProps(state){return{scream:state.data.scream,UI:state.UI};};var mapActionsToProps={getScream:getScream,clearErrors:clearErrors};export default connect(mapStateToProps,mapActionsToProps)(withStyles(styles)(ScreamDialog));","map":{"version":3,"sources":["/home/nikunj/socialape-client/src/components/scream/ScreamDialog.js"],"names":["React","Fragment","useEffect","useState","useRef","withStyles","MyButton","dayjs","Link","LikeButton","Comments","CommentForm","Dialog","DialogContent","CircularProgress","Grid","Typography","CloseIcon","UnfoldMore","ChatIcon","connect","getScream","clearErrors","styles","theme","invisibeSeparator","border","margin","profileImage","maxWidth","height","borderRadius","objectFit","dialogContent","padding","closeButton","position","left","expandButton","spinnerDiv","textAlign","marginTop","marginBottom","visibleSeparator","width","borderBottom","ScreamDialog","props","open","newPath","oldPath","state","setState","handleOpen","window","location","pathname","userHandle","screamId","history","pushState","handleClose","classes","scream","body","createdAt","likeCount","commentCount","userImage","comments","loading","UI","openDialog","JSON","stringify","dialogMarkup","format","mapStateToProps","data","mapActionsToProps"],"mappings":"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","sourcesContent":["import React, { Fragment, useEffect, useState, useRef } from \"react\";\nimport PropTypes from \"prop-types\";\nimport withStyles from \"@material-ui/core/styles/withStyles\";\nimport MyButton from \"../../util/MyButton\";\nimport dayjs from \"dayjs\";\nimport { Link } from \"react-router-dom\";\nimport LikeButton from \"./LikeButton\";\nimport Comments from \"./Comments\";\nimport CommentForm from \"./CommentForm\";\n//MUI stuff\nimport Dialog from \"@material-ui/core/Dialog\";\nimport DialogContent from \"@material-ui/core/DialogContent\";\nimport CircularProgress from \"@material-ui/core/CircularProgress\";\nimport Grid from \"@material-ui/core/Grid\";\nimport Typography from \"@material-ui/core/Typography\";\n//Icons\nimport CloseIcon from \"@material-ui/icons/Close\";\nimport UnfoldMore from \"@material-ui/icons/UnfoldMore\";\nimport ChatIcon from \"@material-ui/icons/Chat\";\n\n//Redux stuff\nimport { connect } from \"react-redux\";\nimport { getScream, clearErrors } from \"../../redux/actions/dataActions\";\n\nconst styles = (theme) => ({\n  //   ...theme,\n  invisibeSeparator: {\n    border: \"none\",\n    margin: 4,\n  },\n  profileImage: {\n    maxWidth: 200,\n    height: 200,\n    borderRadius: \"50%\",\n    objectFit: \"cover\",\n  },\n  dialogContent: {\n    padding: 20,\n  },\n  closeButton: {\n    position: \"absolute\",\n    left: \"90%\",\n  },\n  expandButton: {\n    position: \"absolute\",\n    left: \"90%\",\n  },\n  spinnerDiv: {\n    textAlign: \"center\",\n    marginTop: 50,\n    marginBottom: 50,\n  },\n  visibleSeparator: {\n    width: \"100%\",\n    borderBottom: \"1px solid rgba(0,0,0,0.1)\",\n    marginBottom: 20,\n  },\n});\n\nfunction ScreamDialog(props) {\n  const [state, setState] = useState({ open: false, newPath: \"\", oldPath: \"\" });\n\n  const handleOpen = () => {\n    let oldPath = window.location.pathname;\n\n    const { userHandle, screamId } = props;\n\n    const newPath = `/users/${userHandle}/scream/${screamId}`;\n\n    if (oldPath === newPath) oldPath = `/users/${userHandle}`;\n\n    window.history.pushState(null, null, newPath);\n\n    setState({ ...state, open: true, oldPath, newPath });\n    props.getScream(props.screamId);\n  };\n\n  const handleClose = () => {\n    window.history.pushState(null, null, state.oldPath);\n    setState({ ...state, open: false });\n    props.clearErrors();\n  };\n\n  const {\n    classes,\n    scream: {\n      screamId,\n      body,\n      createdAt,\n      likeCount,\n      commentCount,\n      userImage,\n      userHandle,\n      comments,\n    },\n    UI: { loading },\n  } = props;\n\n  useEffect(() => {\n    if (props.openDialog) handleOpen();\n  }, []);\n\n  useEffect(() => {\n    // props.getScream(props.screamId);\n    return;\n  }, [JSON.stringify(comments)]);\n\n  const dialogMarkup = loading ? (\n    <div className={classes.spinnerDiv}>\n      <CircularProgress size={200} thickness={2} />\n    </div>\n  ) : (\n    <Grid container spacing={10}>\n      <Grid item sm={5}>\n        <img src={userImage} alt=\"Profile\" className={classes.profileImage} />\n      </Grid>\n      <Grid item sm={7}>\n        <Typography\n          component={Link}\n          color=\"primary\"\n          variant=\"h5\"\n          to={`/users/${userHandle}`}\n        >\n          @{userHandle}\n        </Typography>\n        <hr className={classes.invisibeSeparator} />\n        <Typography variant=\"body2\" color=\"textSecondary\">\n          {dayjs(createdAt).format(\"h:mm a, MMMM DD YYYY\")}\n        </Typography>\n        <hr className={classes.invisibeSeparator} />\n        <Typography variant=\"body1\">{body}</Typography>\n        <LikeButton screamId={screamId} />\n        <span>{likeCount} likes</span>\n        <MyButton tip=\"comment\">\n          <ChatIcon color=\"primary\" />\n        </MyButton>\n        <span>{commentCount} comments</span>\n      </Grid>\n      <hr className={classes.visibleSeparator} />\n      <CommentForm screamId={screamId} />\n      <Comments comments={comments} />\n    </Grid>\n  );\n  return (\n    <Fragment>\n      <MyButton\n        onClick={handleOpen}\n        tip=\"Expand Scream\"\n        tipClassName={classes.expandButton}\n      >\n        <UnfoldMore color=\"primary\" />\n      </MyButton>\n\n      <Dialog open={state.open} onClose={handleClose} fullWidth maxWidth=\"sm\">\n        <MyButton\n          tip=\"Close\"\n          onClick={handleClose}\n          tipClassName={classes.closeButton}\n        >\n          <CloseIcon />\n        </MyButton>\n        <DialogContent className={classes.dialogContent}>\n          {dialogMarkup}\n        </DialogContent>\n      </Dialog>\n    </Fragment>\n  );\n}\n\nScreamDialog.propTypes = {\n  clearErrors: PropTypes.func.isRequired,\n  getScream: PropTypes.func.isRequired,\n  screamId: PropTypes.string.isRequired,\n  userHandle: PropTypes.string.isRequired,\n  scream: PropTypes.object.isRequired,\n  UI: PropTypes.object.isRequired,\n};\n\nconst mapStateToProps = (state) => ({\n  scream: state.data.scream,\n  UI: state.UI,\n});\n\nconst mapActionsToProps = {\n  getScream,\n  clearErrors,\n};\n\nexport default connect(\n  mapStateToProps,\n  mapActionsToProps\n)(withStyles(styles)(ScreamDialog));\n"]},"metadata":{},"sourceType":"module"}